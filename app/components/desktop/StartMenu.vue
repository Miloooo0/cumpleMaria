<template>
  <ClientOnly>
    <AnimatePresence>
      <Motion
        v-if="startOpen"
        key="start"
        class="fixed bottom-12 left-0 w-64 bg-white rounded-xl shadow-xl border border-pink-100 p-4"
        :initial="{ opacity: 0, y: 20 }"
        :animate="{ opacity: 1, y: 0 }"
        :exit="{ opacity: 0, y: 20 }"
        :transition="{ duration: 0.3 }"
      >
        <h3 class="font-semibold text-pink-700 mb-2">ğŸ“‚ Inicio</h3>
        <ul class="grid grid-cols-2 gap-3">
          <li
            v-for="item in items"
            :key="item.id"
            class="text-center text-sm hover:scale-105 transition cursor-pointer"
            @click="open(item.id); toggleStart()"
          >
            {{ item.icon }} {{ item.label }}
          </li>
        </ul>
        <div class="mt-4 flex items-center justify-between text-xs">
          <button @click="toggle" class="px-2 py-1 rounded bg-rose-100 text-pink-700">
            {{ mode === 'large' ? 'Iconos grandes' : 'Iconos mini' }}
          </button>
          <button @click="toggleStart" class="text-pink-500 hover:underline">Cerrar</button>
        </div>
      </Motion>
    </AnimatePresence>
  </ClientOnly>
</template>

<script setup lang="ts">
import { Motion, AnimatePresence } from 'motion-v'
import { useTaskbar } from '~/composables/useTaskbar'
import { useWindows } from '~/composables/useWindows'
import { useIconMode } from '~/composables/useIconMode'

const { startOpen, toggleStart } = useTaskbar()
const { open } = useWindows()
const { mode, toggle } = useIconMode()

const items = [
  { id: 'music', label: 'MÃºsica', icon: 'ğŸµ' },
  { id: 'snake', label: 'Snake', icon: 'ğŸ' },
  { id: 'calc', label: 'Calc', icon: 'ğŸ§®' },
  { id: 'notes', label: 'Notas', icon: 'ğŸ“' },
  { id: 'tictactoe', label: '3 en raya', icon: 'â­•' },
  { id: 'love', label: 'LoveTest', icon: 'ğŸ’˜' },
  { id: 'amorcitos', label: 'Amorcitos', icon: 'ğŸ“' },
  { id: 'dibuja', label: 'Dibuja', icon: 'ğŸ¨' },
  { id: 'sabias', label: 'SabÃ­as que', icon: 'ğŸ§ ' },
  { id: 'sorpresa', label: 'Sorpresa', icon: 'ğŸ' },
  { id: 'recuerdos', label: 'Recuerdos', icon: 'ğŸ“¦' },
  { id: 'tv', label: 'TV', icon: 'ğŸ“º' }
]
</script>
